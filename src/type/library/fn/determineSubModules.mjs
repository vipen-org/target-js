import path from "node:path"

export default function(library_functions) {
	let sub_modules = new Map()

	for (const fn of library_functions) {
		const dirname = path.dirname(fn.canonical_path)

		if (dirname === ".") continue

		const depth = dirname.split("/").length

		if (depth > 1) continue

		sub_modules.set(dirname, 1)
	}

	// convert map into array so we can sort it
	let ret = [
		...sub_modules
	].map(([key, value]) => key)

	//
	// sort result for consistent code that will be generated by vipen
	//
	ret.sort((a, b) => {
		return a.localeCompare(b, "en")
	})

	return ret
}
